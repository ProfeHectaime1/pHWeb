
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Rating: concepto-integral</title>
    <style>
        body { font-family: 'Inter', sans-serif; background: #0a0a0a; color: white; padding: 40px; }
        .container { max-width: 1300px; margin: auto; }
        
        /* Layout */
        .concept-block { margin-bottom: 60px; }
        .version-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; margin-top: 20px; }
        
        /* Image Selection Logic */
        .card { 
            position: relative; 
            cursor: pointer; 
            transition: all 0.3s ease; 
            border-radius: 12px; 
            overflow: hidden;
            border: 3px solid transparent;
        }
        .card img { width: 100%; display: block; transition: 0.3s; }
        
        /* State: Not selected (within a group that has a selection) */
        .group-active .card:not(.selected) { opacity: 0.3; filter: grayscale(80%); scale: 0.95; }
        
        /* State: Selected */
        .card.selected { border-color: #2ecc71; transform: scale(1.05); opacity: 1 !important; filter: grayscale(0%) !important; z-index: 10; box-shadow: 0 0 20px rgba(46, 204, 113, 0.4); }

        .check-badge { position: absolute; top: 10px; right: 10px; background: #2ecc71; border-radius: 50%; width: 25px; height: 25px; display: none; justify-content: center; align-items: center; }
        .card.selected .check-badge { display: flex; }

        /* Global Section */
        .global-section { background: #111; padding: 40px; border-radius: 20px; border: 2px dashed #333; margin-top: 80px; }
        .global-grid .card.selected { border-color: #f1c40f; box-shadow: 0 0 20px rgba(241, 196, 15, 0.4); }
        .global-grid .card.selected .check-badge { background: #f1c40f; }

        .submit-area { text-align: center; margin-top: 50px; }
        .submit-btn { background: #2ecc71; color: white; padding: 20px 60px; font-size: 1.5rem; border-radius: 50px; border: none; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Evaluación: concepto-integral</h1>
        <p>1. Haz clic en la mejor versión de cada concepto.<br>2. Al final, elige tus 3 favoritas de toda la lista.</p>

        <div id="concept-container">
    <div class="concept-block" data-concept="2">
        <h2>Variación 2</h2>
        <div class="version-grid">
            <div class="card" onclick="selectConcept('2', '1SLwxViSkpCsKtgMiQ9lcBfctkYlrPq7D', this)">
                <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBOGFKvBwJhwlXOIqUubNgvi_uw-A7zGmeRnZUhgCM1v-RSN2oEDO7JslggE0ludAD-N9-GP1eVO3pjanLaXK_yBf1R0szPLoJh-YZuNhr4kGA=s220">
                <div class="check-badge">✓</div>
            </div>
            <div class="card" onclick="selectConcept('2', '1HwXJbge7-pE3NqkTEFeqPIQNbD4ETB2h', this)">
                <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBODS-x6vUSWN9Vrl7ADgp_dGn2TCctwbzCE5lZGkNMePbtbI1kPgcoayHTEkWjG9HStYBQcQXALt4ngeH5q1nSzJG36wT8OyvqFjy0rzmCx_DU=s220">
                <div class="check-badge">✓</div>
            </div>
            <div class="card" onclick="selectConcept('2', '1pmlnxgLdfyBUhvYTBKHS7mw2v4VaF7NA', this)">
                <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBNbipGwEFiLuE7KShfW3c1g5PFbC0gTzA78l4ODg10ZxGwC5oFthJBp7pWL__B53w449cpNmVmmIoqQoz5UcwMoMPp378CjlRwpMfvZxRFUk4s=s220">
                <div class="check-badge">✓</div>
            </div>
            <div class="card" onclick="selectConcept('2', '1jP-cL7JKOUykrYSpXI5QWnQxvjJiGjdg', this)">
                <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBPdIKIi7XMgtBC0R7I3YaYcW2riaDNOD2EKcLjfTSeslbeRQqEe7xPBB6r8KMUvpi-0yzoFgW11U28yCXa-kGzDOumuxGO63ExnqHR6Q5sq7tw=s220">
                <div class="check-badge">✓</div>
            </div>
            <div class="card" onclick="selectConcept('2', '1S4V1etIZiLqOqSb6wxD39iMdA4nTPTdW', this)">
                <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBPThp4uChxc7LXQz8H8x9lEmF-aaxjtTLMsRLFjbjihuZO34Fl_baHgHzt-LeCySfQyv3O_Au3g0Y3Vf3dtpjSXnR54nH-qcGB8FjqtDEKJ2A=s220">
                <div class="check-badge">✓</div>
            </div>
            <div class="card" onclick="selectConcept('2', '1QIKUe6K5ZJ3Ygcom0_WSighrv09P38lf', this)">
                <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBNPGDfaxPoUdaRb7rPesp0qtdTYNTh9iOqqmoGsXUWwMYL4yxQatEhKrpn7O4PaTUW1gl3kJDDqEzIPv_pOecoRcEsWWhPzXfQx3cM-qul9lA=s220">
                <div class="check-badge">✓</div>
            </div>
            <div class="card" onclick="selectConcept('2', '15JXrUhjGVK6dZC_LwcPp8TP7IhnApqN7', this)">
                <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBNjuyc9uPqEEIPpYjgvKUUHk4FCMoIqG0ZjAKt0Z3b2nkWgQPPlPcUkY9oFGb-_JLj-wG-A9vcJKNjOaq1G4hoBVFEhjlWcLPh4DZN432KidKA=s220">
                <div class="check-badge">✓</div>
            </div></div></div>
    <div class="concept-block" data-concept="3">
        <h2>Variación 3</h2>
        <div class="version-grid">
            <div class="card" onclick="selectConcept('3', '1g6iDby9Jn3T9yUncSW14s2Y0_WYjEcYU', this)">
                <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBMzEJpsTLPGUFYzjQIF4pt2Xq1kXmTzBNMPw9aHwSZsDKdB0SaknnNFa1Y0-aaaTqjcWVI468HmpZ-I2WKYuuoBPeybhkDr_OSefCD1LiBDqH8=s220">
                <div class="check-badge">✓</div>
            </div>
            <div class="card" onclick="selectConcept('3', '1RrtWBv7OVssgQQ4IUdSUmwNGPB3aQq8u', this)">
                <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBMf3i4tuwESenPSGxqoKONktP9KhiD3Hk5rzHrMPRiSnPvjMdGeWdA2kUAlaNcDtW6W7fqJRMwymNhBdVrlScUa3LnSwr8__EfLfBFAo_yeNuY=s220">
                <div class="check-badge">✓</div>
            </div>
            <div class="card" onclick="selectConcept('3', '1FzSnc0pZ06beJItC8vq7ea6bpaA4kVr0', this)">
                <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBPNsANmD3AleRwrobLnEl4RuTkWjPrCmI-2mHWihdOnaFVLzrapckD1J-q0moiCmQUSXaz_Oq7sWL3YEb6-gDgP6OcJ_zUontpdyu0QTHrU_vk=s220">
                <div class="check-badge">✓</div>
            </div>
            <div class="card" onclick="selectConcept('3', '1CGKzQk2a_dHQa30oRSwQ-lZwj0loRgUP', this)">
                <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBMULy8W2XZGEQe7IyJnlJKwkHH6qyMW6L_QmrcKm2ZBx6X6fIk0LYXmJA-5-ectHDulIpJFiHD37vS9h1JurQNq5PDiSFlIIQmiBqVueWV7mk0=s220">
                <div class="check-badge">✓</div>
            </div>
            <div class="card" onclick="selectConcept('3', '1Wcbwr9IkmeLnkxOM-Wt45m4t6XdJRfnS', this)">
                <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBMQcOAo7VQfRBLNgiuVoYvXIsStzXLNeDKJbNhoLmZHFfOhn5tj-8tCNkESHbmSRPWisrGWI3Pb7SE1Ec4GSJmYIucVuSfNpgprJo7tvDc84Q=s220">
                <div class="check-badge">✓</div>
            </div></div></div>
    <div class="concept-block" data-concept="4">
        <h2>Variación 4</h2>
        <div class="version-grid">
            <div class="card" onclick="selectConcept('4', '1k4vt--M0x4zXKuLTU8BDDqkuyiQLqqRa', this)">
                <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBMo9G9hoYiHJ25SXZ4bMsXaK15uLb4MGWZyBtpiTAQfFDTiFpWuBzDemw_fI7T2AqKLEqpnP5jCRt21_jP3heyl9AKE6hwWL4T273gIMbzncl4=s220">
                <div class="check-badge">✓</div>
            </div>
            <div class="card" onclick="selectConcept('4', '1qHhb0oWjsRjXvohyx-FYCZydq3Q7ya7n', this)">
                <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBOZtkWKV_RkTZjclnw9C6PD6B8k9_BUEpLRlmJqwPCUPfqJL0ZB_nBUaelKVotMY62jBHhHap4b2g09pxtifD8OTHyDw7TnGATDKQGV5rV50zA=s220">
                <div class="check-badge">✓</div>
            </div>
            <div class="card" onclick="selectConcept('4', '1po5Ac4B1cwmpZrbfwGIYeWlEcu3xkaR9', this)">
                <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBM5AAmzRbBWuNmjE_pVkKr-lvn6yGX84vy2uZ2P9hvuzZWsQMqT6iIIhmompUqSxsnTGWPHUvTb1h-PuBrDAB93M8GM2nPP7ThalkUsNERKTA=s220">
                <div class="check-badge">✓</div>
            </div></div></div>
        <div class="global-section">
            <h2>Selección Final: Top 3 Global</h2>
            <p>De todas las imágenes mostradas, ¿cuáles son las 3 que mejor funcionan?</p>
            <div class="version-grid global-grid">
        <div class="card global-card" data-id="1CGKzQk2a_dHQa30oRSwQ-lZwj0loRgUP" onclick="selectGlobal('1CGKzQk2a_dHQa30oRSwQ-lZwj0loRgUP', this)">
            <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBMULy8W2XZGEQe7IyJnlJKwkHH6qyMW6L_QmrcKm2ZBx6X6fIk0LYXmJA-5-ectHDulIpJFiHD37vS9h1JurQNq5PDiSFlIIQmiBqVueWV7mk0=s220">
            <div class="check-badge">★</div>
        </div>
        <div class="card global-card" data-id="1jP-cL7JKOUykrYSpXI5QWnQxvjJiGjdg" onclick="selectGlobal('1jP-cL7JKOUykrYSpXI5QWnQxvjJiGjdg', this)">
            <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBPdIKIi7XMgtBC0R7I3YaYcW2riaDNOD2EKcLjfTSeslbeRQqEe7xPBB6r8KMUvpi-0yzoFgW11U28yCXa-kGzDOumuxGO63ExnqHR6Q5sq7tw=s220">
            <div class="check-badge">★</div>
        </div>
        <div class="card global-card" data-id="15JXrUhjGVK6dZC_LwcPp8TP7IhnApqN7" onclick="selectGlobal('15JXrUhjGVK6dZC_LwcPp8TP7IhnApqN7', this)">
            <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBNjuyc9uPqEEIPpYjgvKUUHk4FCMoIqG0ZjAKt0Z3b2nkWgQPPlPcUkY9oFGb-_JLj-wG-A9vcJKNjOaq1G4hoBVFEhjlWcLPh4DZN432KidKA=s220">
            <div class="check-badge">★</div>
        </div>
        <div class="card global-card" data-id="1po5Ac4B1cwmpZrbfwGIYeWlEcu3xkaR9" onclick="selectGlobal('1po5Ac4B1cwmpZrbfwGIYeWlEcu3xkaR9', this)">
            <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBM5AAmzRbBWuNmjE_pVkKr-lvn6yGX84vy2uZ2P9hvuzZWsQMqT6iIIhmompUqSxsnTGWPHUvTb1h-PuBrDAB93M8GM2nPP7ThalkUsNERKTA=s220">
            <div class="check-badge">★</div>
        </div>
        <div class="card global-card" data-id="1SLwxViSkpCsKtgMiQ9lcBfctkYlrPq7D" onclick="selectGlobal('1SLwxViSkpCsKtgMiQ9lcBfctkYlrPq7D', this)">
            <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBOGFKvBwJhwlXOIqUubNgvi_uw-A7zGmeRnZUhgCM1v-RSN2oEDO7JslggE0ludAD-N9-GP1eVO3pjanLaXK_yBf1R0szPLoJh-YZuNhr4kGA=s220">
            <div class="check-badge">★</div>
        </div>
        <div class="card global-card" data-id="1qHhb0oWjsRjXvohyx-FYCZydq3Q7ya7n" onclick="selectGlobal('1qHhb0oWjsRjXvohyx-FYCZydq3Q7ya7n', this)">
            <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBOZtkWKV_RkTZjclnw9C6PD6B8k9_BUEpLRlmJqwPCUPfqJL0ZB_nBUaelKVotMY62jBHhHap4b2g09pxtifD8OTHyDw7TnGATDKQGV5rV50zA=s220">
            <div class="check-badge">★</div>
        </div>
        <div class="card global-card" data-id="1k4vt--M0x4zXKuLTU8BDDqkuyiQLqqRa" onclick="selectGlobal('1k4vt--M0x4zXKuLTU8BDDqkuyiQLqqRa', this)">
            <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBMo9G9hoYiHJ25SXZ4bMsXaK15uLb4MGWZyBtpiTAQfFDTiFpWuBzDemw_fI7T2AqKLEqpnP5jCRt21_jP3heyl9AKE6hwWL4T273gIMbzncl4=s220">
            <div class="check-badge">★</div>
        </div>
        <div class="card global-card" data-id="1FzSnc0pZ06beJItC8vq7ea6bpaA4kVr0" onclick="selectGlobal('1FzSnc0pZ06beJItC8vq7ea6bpaA4kVr0', this)">
            <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBPNsANmD3AleRwrobLnEl4RuTkWjPrCmI-2mHWihdOnaFVLzrapckD1J-q0moiCmQUSXaz_Oq7sWL3YEb6-gDgP6OcJ_zUontpdyu0QTHrU_vk=s220">
            <div class="check-badge">★</div>
        </div>
        <div class="card global-card" data-id="1RrtWBv7OVssgQQ4IUdSUmwNGPB3aQq8u" onclick="selectGlobal('1RrtWBv7OVssgQQ4IUdSUmwNGPB3aQq8u', this)">
            <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBMf3i4tuwESenPSGxqoKONktP9KhiD3Hk5rzHrMPRiSnPvjMdGeWdA2kUAlaNcDtW6W7fqJRMwymNhBdVrlScUa3LnSwr8__EfLfBFAo_yeNuY=s220">
            <div class="check-badge">★</div>
        </div>
        <div class="card global-card" data-id="1g6iDby9Jn3T9yUncSW14s2Y0_WYjEcYU" onclick="selectGlobal('1g6iDby9Jn3T9yUncSW14s2Y0_WYjEcYU', this)">
            <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBMzEJpsTLPGUFYzjQIF4pt2Xq1kXmTzBNMPw9aHwSZsDKdB0SaknnNFa1Y0-aaaTqjcWVI468HmpZ-I2WKYuuoBPeybhkDr_OSefCD1LiBDqH8=s220">
            <div class="check-badge">★</div>
        </div>
        <div class="card global-card" data-id="1HwXJbge7-pE3NqkTEFeqPIQNbD4ETB2h" onclick="selectGlobal('1HwXJbge7-pE3NqkTEFeqPIQNbD4ETB2h', this)">
            <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBODS-x6vUSWN9Vrl7ADgp_dGn2TCctwbzCE5lZGkNMePbtbI1kPgcoayHTEkWjG9HStYBQcQXALt4ngeH5q1nSzJG36wT8OyvqFjy0rzmCx_DU=s220">
            <div class="check-badge">★</div>
        </div>
        <div class="card global-card" data-id="1pmlnxgLdfyBUhvYTBKHS7mw2v4VaF7NA" onclick="selectGlobal('1pmlnxgLdfyBUhvYTBKHS7mw2v4VaF7NA', this)">
            <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBNbipGwEFiLuE7KShfW3c1g5PFbC0gTzA78l4ODg10ZxGwC5oFthJBp7pWL__B53w449cpNmVmmIoqQoz5UcwMoMPp378CjlRwpMfvZxRFUk4s=s220">
            <div class="check-badge">★</div>
        </div>
        <div class="card global-card" data-id="1Wcbwr9IkmeLnkxOM-Wt45m4t6XdJRfnS" onclick="selectGlobal('1Wcbwr9IkmeLnkxOM-Wt45m4t6XdJRfnS', this)">
            <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBMQcOAo7VQfRBLNgiuVoYvXIsStzXLNeDKJbNhoLmZHFfOhn5tj-8tCNkESHbmSRPWisrGWI3Pb7SE1Ec4GSJmYIucVuSfNpgprJo7tvDc84Q=s220">
            <div class="check-badge">★</div>
        </div>
        <div class="card global-card" data-id="1QIKUe6K5ZJ3Ygcom0_WSighrv09P38lf" onclick="selectGlobal('1QIKUe6K5ZJ3Ygcom0_WSighrv09P38lf', this)">
            <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBNPGDfaxPoUdaRb7rPesp0qtdTYNTh9iOqqmoGsXUWwMYL4yxQatEhKrpn7O4PaTUW1gl3kJDDqEzIPv_pOecoRcEsWWhPzXfQx3cM-qul9lA=s220">
            <div class="check-badge">★</div>
        </div>
        <div class="card global-card" data-id="1S4V1etIZiLqOqSb6wxD39iMdA4nTPTdW" onclick="selectGlobal('1S4V1etIZiLqOqSb6wxD39iMdA4nTPTdW', this)">
            <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBPThp4uChxc7LXQz8H8x9lEmF-aaxjtTLMsRLFjbjihuZO34Fl_baHgHzt-LeCySfQyv3O_Au3g0Y3Vf3dtpjSXnR54nH-qcGB8FjqtDEKJ2A=s220">
            <div class="check-badge">★</div>
        </div>
            </div>
        </div>

        <div class="submit-area">
            <button class="submit-btn" onclick="submitData()">Finalizar Evaluación</button>
        </div>
    </div>

    <script>
        const ratings = {
            videoID: "concepto-integral",
            conceptWinners: {},
            globalTop3: []
        };

        function selectConcept(conceptId, imageId, element) {
            const parent = element.closest('.concept-block');
            parent.classList.add('group-active');
            
            // Remove previous selection in this block
            parent.querySelectorAll('.card').forEach(c => c.classList.remove('selected'));
            
            // Set new selection
            element.classList.add('selected');
            ratings.conceptWinners[conceptId] = imageId;
        }

        function selectGlobal(imageId, element) {
            const isSelected = element.classList.contains('selected');
            
            if (isSelected) {
                element.classList.remove('selected');
                ratings.globalTop3 = ratings.globalTop3.filter(id => id !== imageId);
            } else {
                if (ratings.globalTop3.length >= 3) {
                    alert("Ya has seleccionado tus 3 favoritas.");
                    return;
                }
                element.classList.add('selected');
                ratings.globalTop3.push(imageId);
            }
            
            // Toggle global active state
            const grid = document.querySelector('.global-grid');
            ratings.globalTop3.length > 0 ? grid.classList.add('group-active') : grid.classList.remove('group-active');
        }

        function submitData() {
            // Validation
            if (Object.keys(ratings.conceptWinners).length < 3) {
                alert("Por favor selecciona una ganadora por cada concepto.");
                return;
            }
            if (ratings.globalTop3.length < 3) {
                alert("Por favor selecciona tus 3 favoritas globales.");
                return;
            }

            fetch('YOUR_N8N_WEBHOOK_URL', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(ratings)
            }).then(() => {
                alert("¡Gracias! Tu evaluación ha sido enviada.");
                window.location.href = "../rating.html";
            });
        }
    </script>
</body>
</html>