
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="referrer" content="no-referrer">
    <title>Miniaturas Concepto Integral</title>
    <style>
        :root { 
            --accent: #2ecc71; --gold: #f1c40f; --danger: #ff4757;
            --bg: #0a0a0a; --thumb-size: 250px;
            --border-dynamic: calc(var(--thumb-size) * 0.012);
        }
        /* ... existing styles remain exactly the same ... */
        body { font-family: 'Inter', sans-serif; background: linear-gradient(rgba(10, 10, 10, 0.85), rgba(10, 10, 10, 0.85)), url('https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-background.png'); background-size: cover; background-attachment: fixed; background-position: center; ; color: white; margin: 0; padding: 0; display: flex; overflow-x: hidden; }
        #content-wrapper { transition: filter 0.4s cubic-bezier(0.4, 0, 0.2, 1); width: 100%; }
        body.modal-open #content-wrapper { filter: blur(20px) brightness(0.5); pointer-events: none; }
        .home-btn { position: fixed; top: 30px; left: 30px; color: white; opacity: 0.4; transition: 0.3s; z-index: 2000; }
        .home-btn:hover { opacity: 1; color: var(--accent); }
        .size-control { position: fixed; left: -140px; top: 50vh; transform: translateY(-50%) rotate(-90deg); width: 500px; z-index: 1500; }
        .size-control input { cursor: pointer; accent-color: var(--accent); width: 100%; }
        .main-content { padding: 60px 40px 60px 180px; display: flex; flex-direction: column; align-items: center; }
        .version-grid { display: flex; flex-wrap: wrap; justify-content: center; gap: 30px; margin-top: 20px; width: 100%; }
        .card { position: relative; cursor: pointer; border-radius: 12px; width: var(--thumb-size); transition: opacity 0.5s ease, transform 0.3s ease, width 0.1s ease-out; }
        .card img { width: 100%; border-radius: 10px; display: block; background: #111; aspect-ratio: 16/9; object-fit: cover; transition: box-shadow 0.2s; }
        .concept-block.has-winner .card:not(.selected) { opacity: 0.2; }
        .pool-locked .pool-card:not(.selected) { opacity: 0.2; pointer-events: none; }
        .card.hidden { display: none; }
        .card.selected img { box-shadow: 0 0 0 var(--border-dynamic) var(--accent); }
        .tray-card img { box-shadow: 0 0 0 var(--border-dynamic) var(--gold); }
        .zoom-btn, .discard-btn { position: absolute; top: 10px; background: rgba(0,0,0,0.5); color: white; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; opacity: 0; transition: 0.3s; z-index: 100; backdrop-filter: blur(8px); border: 1px solid rgba(255,255,255,0.1); }
        .zoom-btn { right: 10px; }
        .discard-btn { left: 10px; }
        .discard-btn:hover { background: var(--danger); color: white; }
        .card:hover .zoom-btn, .card:hover .discard-btn { opacity: 1; }
        .zoom-btn svg, .discard-btn svg { width: 16px; height: 16px; stroke: currentColor; }
        .global-section { margin-top: 100px; padding-top: 80px; border-top: 1px solid #222; width: 100%; text-align: center; }
        .global-header { display: flex; align-items: center; justify-content: center; gap: 15px; margin-bottom: 20px; }
        .shuffle-btn { background: none; border: none; cursor: pointer; color: #555; transition: 0.3s; padding: 5px; display: flex; }
        .shuffle-btn:hover { color: white; transform: rotate(45deg); }
        .selection-tray { margin-top: 30px; min-height: 80px; padding: 20px; display: none; gap: 20px; justify-content: center; }
        .discarded-drawer { margin: 40px auto; width: 100%; max-width: 900px; border-radius: 12px; background: #111; overflow: hidden; border: 1px solid #222; }
        .drawer-header { padding: 15px; cursor: pointer; display: flex; justify-content: center; align-items: center; gap: 10px; color: #666; font-size: 0.9rem; transition: 0.3s; }
        .drawer-header:hover { color: white; background: #161616; }
        .drawer-header svg { width: 16px; transition: 0.3s; }
        .drawer-content { max-height: 0; opacity: 0; transition: all 0.4s ease; display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; overflow: hidden; }
        .drawer-content.open { max-height: 1000px; opacity: 1; padding: 30px; }
        #lightbox { position: fixed; inset: 0; background: rgba(0,0,0,0.2); display: none; justify-content: center; align-items: center; z-index: 5000; }
        #lightbox.active { display: flex; }
        #lightbox img { max-width: 85%; max-height: 80%; border-radius: 8px; box-shadow: 0 30px 60px rgba(0,0,0,0.8); }
        #submit-btn { display: none; background: var(--accent); color: white; padding: 18px 50px; border-radius: 40px; border: none; cursor: pointer; font-weight: bold; margin: 40px auto; transition: 0.3s; }
        #submit-btn:hover { transform: scale(1.05); box-shadow: 0 0 20px rgba(46, 204, 113, 0.3); }
    </style>
</head>
<body>
    <div id="content-wrapper">
        <a href="../home.html" class="home-btn">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
        </a>

        <div class="size-control">
            <input type="range" min="100" max="1000" value="250" id="globalSlider">
        </div>

        <div class="main-content">
            <h1>Miniaturas Concepto Integral</h1>
            <div id="concepts">
    <div class="concept-block" id="block-2">
        <h2 style="margin-top:60px; opacity:0.3; font-weight:300; font-size: 1.2rem;">Variación 2</h2>
        <div class="version-grid">
            <div class="card" data-id="1KWpIgoNgepbp231EHXhau8xxW6qNBUmf" onclick="toggleConcept('2', '1KWpIgoNgepbp231EHXhau8xxW6qNBUmf', this)">
                <div class="zoom-btn" onclick="openZoom(event, 'https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.6/Concepto-Integral-2.6')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/></svg>
                </div>
                <img class="thumb-img" data-base="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.6/Concepto-Integral-2.6" src="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.6/Concepto-Integral-2.6_250.png">
            </div>
            <div class="card" data-id="1VJmobe5ejxXqPF8GBBBkBgq_dnZbRLnI" onclick="toggleConcept('2', '1VJmobe5ejxXqPF8GBBBkBgq_dnZbRLnI', this)">
                <div class="zoom-btn" onclick="openZoom(event, 'https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.5/Concepto-Integral-2.5')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/></svg>
                </div>
                <img class="thumb-img" data-base="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.5/Concepto-Integral-2.5" src="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.5/Concepto-Integral-2.5_250.png">
            </div>
            <div class="card" data-id="1peh-k0BrfttL03j8PafSDVJWpwFwpcm4" onclick="toggleConcept('2', '1peh-k0BrfttL03j8PafSDVJWpwFwpcm4', this)">
                <div class="zoom-btn" onclick="openZoom(event, 'https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.4/Concepto-Integral-2.4')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/></svg>
                </div>
                <img class="thumb-img" data-base="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.4/Concepto-Integral-2.4" src="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.4/Concepto-Integral-2.4_250.png">
            </div>
            <div class="card" data-id="1k7_1AflTnNi_ven3qoAXaG_Wl4XXNGKP" onclick="toggleConcept('2', '1k7_1AflTnNi_ven3qoAXaG_Wl4XXNGKP', this)">
                <div class="zoom-btn" onclick="openZoom(event, 'https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.3/Concepto-Integral-2.3')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/></svg>
                </div>
                <img class="thumb-img" data-base="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.3/Concepto-Integral-2.3" src="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.3/Concepto-Integral-2.3_250.png">
            </div>
            <div class="card" data-id="1QnrBE6XPRjXMD2yiPOcSzL2dJtHXEyfN" onclick="toggleConcept('2', '1QnrBE6XPRjXMD2yiPOcSzL2dJtHXEyfN', this)">
                <div class="zoom-btn" onclick="openZoom(event, 'https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.2/Concepto-Integral-2.2')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/></svg>
                </div>
                <img class="thumb-img" data-base="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.2/Concepto-Integral-2.2" src="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.2/Concepto-Integral-2.2_250.png">
            </div>
            <div class="card" data-id="1jlhUDuIPoaRYXHduZJcyGKsGF81mK_CE" onclick="toggleConcept('2', '1jlhUDuIPoaRYXHduZJcyGKsGF81mK_CE', this)">
                <div class="zoom-btn" onclick="openZoom(event, 'https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.1/Concepto-Integral-2.1')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/></svg>
                </div>
                <img class="thumb-img" data-base="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.1/Concepto-Integral-2.1" src="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.1/Concepto-Integral-2.1_250.png">
            </div>
            <div class="card" data-id="13m9A1e4BmdEg_V7_T_yuPmv3Y19SJuiu" onclick="toggleConcept('2', '13m9A1e4BmdEg_V7_T_yuPmv3Y19SJuiu', this)">
                <div class="zoom-btn" onclick="openZoom(event, 'https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.0/Concepto-Integral-2.0')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/></svg>
                </div>
                <img class="thumb-img" data-base="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.0/Concepto-Integral-2.0" src="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.0/Concepto-Integral-2.0_250.png">
            </div></div></div>
    <div class="concept-block" id="block-3">
        <h2 style="margin-top:60px; opacity:0.3; font-weight:300; font-size: 1.2rem;">Variación 3</h2>
        <div class="version-grid">
            <div class="card" data-id="1vrpH8OcQZLzvsmbyRc4vyHzUXjOH5pB9" onclick="toggleConcept('3', '1vrpH8OcQZLzvsmbyRc4vyHzUXjOH5pB9', this)">
                <div class="zoom-btn" onclick="openZoom(event, 'https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-3.0/Concepto-Integral-3.0')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/></svg>
                </div>
                <img class="thumb-img" data-base="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-3.0/Concepto-Integral-3.0" src="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-3.0/Concepto-Integral-3.0_250.png">
            </div>
            <div class="card" data-id="1YuurgwKf64YBzK-9ho9n-CMF7NwGAhCn" onclick="toggleConcept('3', '1YuurgwKf64YBzK-9ho9n-CMF7NwGAhCn', this)">
                <div class="zoom-btn" onclick="openZoom(event, 'https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-3.4/Concepto-Integral-3.4')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/></svg>
                </div>
                <img class="thumb-img" data-base="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-3.4/Concepto-Integral-3.4" src="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-3.4/Concepto-Integral-3.4_250.png">
            </div>
            <div class="card" data-id="1LYOEmZdeLC5OYcYkoP9u7elEBcaoqzjm" onclick="toggleConcept('3', '1LYOEmZdeLC5OYcYkoP9u7elEBcaoqzjm', this)">
                <div class="zoom-btn" onclick="openZoom(event, 'https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-3.3/Concepto-Integral-3.3')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/></svg>
                </div>
                <img class="thumb-img" data-base="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-3.3/Concepto-Integral-3.3" src="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-3.3/Concepto-Integral-3.3_250.png">
            </div>
            <div class="card" data-id="1-hxcEaaBXjVg3XiiVkVL9RSb0SAiedMH" onclick="toggleConcept('3', '1-hxcEaaBXjVg3XiiVkVL9RSb0SAiedMH', this)">
                <div class="zoom-btn" onclick="openZoom(event, 'https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-3.2/Concepto-Integral-3.2')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/></svg>
                </div>
                <img class="thumb-img" data-base="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-3.2/Concepto-Integral-3.2" src="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-3.2/Concepto-Integral-3.2_250.png">
            </div>
            <div class="card" data-id="1884DN0PtTCuvLC_MrMq_TvaA4b_OVU5A" onclick="toggleConcept('3', '1884DN0PtTCuvLC_MrMq_TvaA4b_OVU5A', this)">
                <div class="zoom-btn" onclick="openZoom(event, 'https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-3.1/Concepto-Integral-3.1')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/></svg>
                </div>
                <img class="thumb-img" data-base="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-3.1/Concepto-Integral-3.1" src="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-3.1/Concepto-Integral-3.1_250.png">
            </div></div></div>
    <div class="concept-block" id="block-4">
        <h2 style="margin-top:60px; opacity:0.3; font-weight:300; font-size: 1.2rem;">Variación 4</h2>
        <div class="version-grid">
            <div class="card" data-id="1d5Cj-IHAJfqA5slZsANloaB3Rho0mYOd" onclick="toggleConcept('4', '1d5Cj-IHAJfqA5slZsANloaB3Rho0mYOd', this)">
                <div class="zoom-btn" onclick="openZoom(event, 'https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-4.2/Concepto-Integral-4.2')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/></svg>
                </div>
                <img class="thumb-img" data-base="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-4.2/Concepto-Integral-4.2" src="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-4.2/Concepto-Integral-4.2_250.png">
            </div>
            <div class="card" data-id="1CHGJEqObd9Jxh6PjEzif9VJZTDhhEhma" onclick="toggleConcept('4', '1CHGJEqObd9Jxh6PjEzif9VJZTDhhEhma', this)">
                <div class="zoom-btn" onclick="openZoom(event, 'https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-4.0/Concepto-Integral-4.0')">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/></svg>
                </div>
                <img class="thumb-img" data-base="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-4.0/Concepto-Integral-4.0" src="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-4.0/Concepto-Integral-4.0_250.png">
            </div></div></div>
            </div>
            <div class="global-section">
                <div class="global-header">
                    <h2 style="color:var(--gold); font-weight:300; margin:0;">Top 3 Global</h2>
                    <button class="shuffle-btn" onclick="shufflePool()" title="Aleatorio">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 3h5v5M4 20L21 3M21 16v5h-5M15 15l6 6M4 4l5 5"/></svg>
                    </button>
                </div>
                <div class="version-grid" id="pool">
                    <div class="card pool-card" id="pool-card-1vrpH8OcQZLzvsmbyRc4vyHzUXjOH5pB9" data-id="1vrpH8OcQZLzvsmbyRc4vyHzUXjOH5pB9" onclick="addToTop3('1vrpH8OcQZLzvsmbyRc4vyHzUXjOH5pB9')">
                        <div class="discard-btn" onclick="discardImage(event, '1vrpH8OcQZLzvsmbyRc4vyHzUXjOH5pB9')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                        </div>
                        <div class="zoom-btn" onclick="openZoom(event, 'https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-3.0/Concepto-Integral-3.0')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/></svg>
                        </div>
                        <img class="thumb-img" data-base="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-3.0/Concepto-Integral-3.0" src="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-3.0/Concepto-Integral-3.0_250.png">
                    </div>
                    <div class="card pool-card" id="pool-card-1d5Cj-IHAJfqA5slZsANloaB3Rho0mYOd" data-id="1d5Cj-IHAJfqA5slZsANloaB3Rho0mYOd" onclick="addToTop3('1d5Cj-IHAJfqA5slZsANloaB3Rho0mYOd')">
                        <div class="discard-btn" onclick="discardImage(event, '1d5Cj-IHAJfqA5slZsANloaB3Rho0mYOd')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                        </div>
                        <div class="zoom-btn" onclick="openZoom(event, 'https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-4.2/Concepto-Integral-4.2')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/></svg>
                        </div>
                        <img class="thumb-img" data-base="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-4.2/Concepto-Integral-4.2" src="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-4.2/Concepto-Integral-4.2_250.png">
                    </div>
                    <div class="card pool-card" id="pool-card-1CHGJEqObd9Jxh6PjEzif9VJZTDhhEhma" data-id="1CHGJEqObd9Jxh6PjEzif9VJZTDhhEhma" onclick="addToTop3('1CHGJEqObd9Jxh6PjEzif9VJZTDhhEhma')">
                        <div class="discard-btn" onclick="discardImage(event, '1CHGJEqObd9Jxh6PjEzif9VJZTDhhEhma')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                        </div>
                        <div class="zoom-btn" onclick="openZoom(event, 'https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-4.0/Concepto-Integral-4.0')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/></svg>
                        </div>
                        <img class="thumb-img" data-base="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-4.0/Concepto-Integral-4.0" src="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-4.0/Concepto-Integral-4.0_250.png">
                    </div>
                    <div class="card pool-card" id="pool-card-1YuurgwKf64YBzK-9ho9n-CMF7NwGAhCn" data-id="1YuurgwKf64YBzK-9ho9n-CMF7NwGAhCn" onclick="addToTop3('1YuurgwKf64YBzK-9ho9n-CMF7NwGAhCn')">
                        <div class="discard-btn" onclick="discardImage(event, '1YuurgwKf64YBzK-9ho9n-CMF7NwGAhCn')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                        </div>
                        <div class="zoom-btn" onclick="openZoom(event, 'https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-3.4/Concepto-Integral-3.4')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/></svg>
                        </div>
                        <img class="thumb-img" data-base="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-3.4/Concepto-Integral-3.4" src="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-3.4/Concepto-Integral-3.4_250.png">
                    </div>
                    <div class="card pool-card" id="pool-card-1LYOEmZdeLC5OYcYkoP9u7elEBcaoqzjm" data-id="1LYOEmZdeLC5OYcYkoP9u7elEBcaoqzjm" onclick="addToTop3('1LYOEmZdeLC5OYcYkoP9u7elEBcaoqzjm')">
                        <div class="discard-btn" onclick="discardImage(event, '1LYOEmZdeLC5OYcYkoP9u7elEBcaoqzjm')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                        </div>
                        <div class="zoom-btn" onclick="openZoom(event, 'https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-3.3/Concepto-Integral-3.3')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/></svg>
                        </div>
                        <img class="thumb-img" data-base="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-3.3/Concepto-Integral-3.3" src="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-3.3/Concepto-Integral-3.3_250.png">
                    </div>
                    <div class="card pool-card" id="pool-card-1-hxcEaaBXjVg3XiiVkVL9RSb0SAiedMH" data-id="1-hxcEaaBXjVg3XiiVkVL9RSb0SAiedMH" onclick="addToTop3('1-hxcEaaBXjVg3XiiVkVL9RSb0SAiedMH')">
                        <div class="discard-btn" onclick="discardImage(event, '1-hxcEaaBXjVg3XiiVkVL9RSb0SAiedMH')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                        </div>
                        <div class="zoom-btn" onclick="openZoom(event, 'https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-3.2/Concepto-Integral-3.2')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/></svg>
                        </div>
                        <img class="thumb-img" data-base="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-3.2/Concepto-Integral-3.2" src="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-3.2/Concepto-Integral-3.2_250.png">
                    </div>
                    <div class="card pool-card" id="pool-card-1884DN0PtTCuvLC_MrMq_TvaA4b_OVU5A" data-id="1884DN0PtTCuvLC_MrMq_TvaA4b_OVU5A" onclick="addToTop3('1884DN0PtTCuvLC_MrMq_TvaA4b_OVU5A')">
                        <div class="discard-btn" onclick="discardImage(event, '1884DN0PtTCuvLC_MrMq_TvaA4b_OVU5A')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                        </div>
                        <div class="zoom-btn" onclick="openZoom(event, 'https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-3.1/Concepto-Integral-3.1')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/></svg>
                        </div>
                        <img class="thumb-img" data-base="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-3.1/Concepto-Integral-3.1" src="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-3.1/Concepto-Integral-3.1_250.png">
                    </div>
                    <div class="card pool-card" id="pool-card-1KWpIgoNgepbp231EHXhau8xxW6qNBUmf" data-id="1KWpIgoNgepbp231EHXhau8xxW6qNBUmf" onclick="addToTop3('1KWpIgoNgepbp231EHXhau8xxW6qNBUmf')">
                        <div class="discard-btn" onclick="discardImage(event, '1KWpIgoNgepbp231EHXhau8xxW6qNBUmf')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                        </div>
                        <div class="zoom-btn" onclick="openZoom(event, 'https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.6/Concepto-Integral-2.6')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/></svg>
                        </div>
                        <img class="thumb-img" data-base="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.6/Concepto-Integral-2.6" src="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.6/Concepto-Integral-2.6_250.png">
                    </div>
                    <div class="card pool-card" id="pool-card-1VJmobe5ejxXqPF8GBBBkBgq_dnZbRLnI" data-id="1VJmobe5ejxXqPF8GBBBkBgq_dnZbRLnI" onclick="addToTop3('1VJmobe5ejxXqPF8GBBBkBgq_dnZbRLnI')">
                        <div class="discard-btn" onclick="discardImage(event, '1VJmobe5ejxXqPF8GBBBkBgq_dnZbRLnI')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                        </div>
                        <div class="zoom-btn" onclick="openZoom(event, 'https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.5/Concepto-Integral-2.5')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/></svg>
                        </div>
                        <img class="thumb-img" data-base="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.5/Concepto-Integral-2.5" src="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.5/Concepto-Integral-2.5_250.png">
                    </div>
                    <div class="card pool-card" id="pool-card-1peh-k0BrfttL03j8PafSDVJWpwFwpcm4" data-id="1peh-k0BrfttL03j8PafSDVJWpwFwpcm4" onclick="addToTop3('1peh-k0BrfttL03j8PafSDVJWpwFwpcm4')">
                        <div class="discard-btn" onclick="discardImage(event, '1peh-k0BrfttL03j8PafSDVJWpwFwpcm4')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                        </div>
                        <div class="zoom-btn" onclick="openZoom(event, 'https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.4/Concepto-Integral-2.4')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/></svg>
                        </div>
                        <img class="thumb-img" data-base="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.4/Concepto-Integral-2.4" src="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.4/Concepto-Integral-2.4_250.png">
                    </div>
                    <div class="card pool-card" id="pool-card-1k7_1AflTnNi_ven3qoAXaG_Wl4XXNGKP" data-id="1k7_1AflTnNi_ven3qoAXaG_Wl4XXNGKP" onclick="addToTop3('1k7_1AflTnNi_ven3qoAXaG_Wl4XXNGKP')">
                        <div class="discard-btn" onclick="discardImage(event, '1k7_1AflTnNi_ven3qoAXaG_Wl4XXNGKP')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                        </div>
                        <div class="zoom-btn" onclick="openZoom(event, 'https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.3/Concepto-Integral-2.3')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/></svg>
                        </div>
                        <img class="thumb-img" data-base="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.3/Concepto-Integral-2.3" src="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.3/Concepto-Integral-2.3_250.png">
                    </div>
                    <div class="card pool-card" id="pool-card-1QnrBE6XPRjXMD2yiPOcSzL2dJtHXEyfN" data-id="1QnrBE6XPRjXMD2yiPOcSzL2dJtHXEyfN" onclick="addToTop3('1QnrBE6XPRjXMD2yiPOcSzL2dJtHXEyfN')">
                        <div class="discard-btn" onclick="discardImage(event, '1QnrBE6XPRjXMD2yiPOcSzL2dJtHXEyfN')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                        </div>
                        <div class="zoom-btn" onclick="openZoom(event, 'https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.2/Concepto-Integral-2.2')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/></svg>
                        </div>
                        <img class="thumb-img" data-base="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.2/Concepto-Integral-2.2" src="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.2/Concepto-Integral-2.2_250.png">
                    </div>
                    <div class="card pool-card" id="pool-card-1jlhUDuIPoaRYXHduZJcyGKsGF81mK_CE" data-id="1jlhUDuIPoaRYXHduZJcyGKsGF81mK_CE" onclick="addToTop3('1jlhUDuIPoaRYXHduZJcyGKsGF81mK_CE')">
                        <div class="discard-btn" onclick="discardImage(event, '1jlhUDuIPoaRYXHduZJcyGKsGF81mK_CE')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                        </div>
                        <div class="zoom-btn" onclick="openZoom(event, 'https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.1/Concepto-Integral-2.1')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/></svg>
                        </div>
                        <img class="thumb-img" data-base="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.1/Concepto-Integral-2.1" src="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.1/Concepto-Integral-2.1_250.png">
                    </div>
                    <div class="card pool-card" id="pool-card-13m9A1e4BmdEg_V7_T_yuPmv3Y19SJuiu" data-id="13m9A1e4BmdEg_V7_T_yuPmv3Y19SJuiu" onclick="addToTop3('13m9A1e4BmdEg_V7_T_yuPmv3Y19SJuiu')">
                        <div class="discard-btn" onclick="discardImage(event, '13m9A1e4BmdEg_V7_T_yuPmv3Y19SJuiu')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                        </div>
                        <div class="zoom-btn" onclick="openZoom(event, 'https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.0/Concepto-Integral-2.0')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/></svg>
                        </div>
                        <img class="thumb-img" data-base="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.0/Concepto-Integral-2.0" src="https://profehectaime1.github.io/pHWeb-assets/Thumbnails/concepto-integral/Concepto-Integral-2.0/Concepto-Integral-2.0_250.png">
                    </div>
                </div>
                <div class="selection-tray" id="tray"></div>
                <div class="discarded-drawer">
                    <div class="drawer-header" onclick="toggleDrawer()">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
                        <span>Miniaturas Descartadas</span>
                    </div>
                    <div class="drawer-content" id="discarded-pool"></div>
                </div>
            </div>
            <button id="submit-btn" onclick="alert('Selección guardada')">Enviar Selección</button>
        </div>
    </div>

    <div id="lightbox" onclick="closeZoom()">
        <img id="zoomImg" src="">
    </div>

    <script>
        const ratings = { winners: {}, top3: [], discarded: [] };
        const slider = document.getElementById('globalSlider');

        // Logic to swap suffix based on slider
        slider.oninput = (e) => {
            const val = parseInt(e.target.value);
            
            // 1. Smoothly scale the container size (Continuous)
            document.documentElement.style.setProperty('--thumb-size', val + 'px');
            
            // 2. Select the best source file based on the current size (Discrete thresholds)
            let suffix = '250';
            if (val > 750) suffix = '1000';
            else if (val > 500) suffix = '750';
            else if (val > 250) suffix = '500';
            else suffix = '250';
        
            document.querySelectorAll('.thumb-img').forEach(img => {
                const newSrc = img.dataset.base + '_' + suffix + '.png';
                
                // Only update the src if it actually changed to prevent flickering
                if (img.src !== newSrc) {
                    img.src = newSrc;
                }
            });
            const preloader = new Image();
            preloader.src = img.dataset.base + '_1000.png';
        };

        function openZoom(e, baseUrl) {
            e.stopPropagation();
            document.body.classList.add('modal-open');
            document.getElementById('zoomImg').src = baseUrl + '_1000.png';
            document.getElementById('lightbox').classList.add('active');
        }

        // ... Keep all other helper functions (shufflePool, toggleConcept, etc.) same as before ...
        const poolContainer = document.getElementById('pool');
        function shufflePool() {
            const cards = Array.from(poolContainer.children);
            for (let i = cards.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                poolContainer.appendChild(cards[j]);
            }
        }
        function toggleConcept(cId, imgId, el) {
            const block = document.getElementById('block-'+cId);
            if (el.classList.contains('selected')) {
                el.classList.remove('selected');
                delete ratings.winners[cId];
                block.classList.remove('has-winner');
            } else {
                block.querySelectorAll('.card').forEach(c => c.classList.remove('selected'));
                el.classList.add('selected');
                ratings.winners[cId] = imgId;
                block.classList.add('has-winner');
            }
            updateSubmit();
        }
        function addToTop3(id) {
            if (ratings.top3.length >= 3 || ratings.top3.includes(id)) return;
            ratings.top3.push(id);
            syncPool();
        }
        function discardImage(e, id) {
            e.stopPropagation();
            ratings.discarded.push(id);
            ratings.top3 = ratings.top3.filter(i => i !== id);
            syncPool();
        }
        function recoverImage(id) {
            ratings.discarded = ratings.discarded.filter(i => i !== id);
            syncPool();
        }
        function syncPool() {
            const tray = document.getElementById('tray');
            const discardedPool = document.getElementById('discarded-pool');
            if (ratings.top3.length >= 3) poolContainer.classList.add('pool-locked');
            else poolContainer.classList.remove('pool-locked');
            document.querySelectorAll('.pool-card').forEach(card => {
                const id = card.dataset.id;
                card.classList.toggle('hidden', ratings.top3.includes(id) || ratings.discarded.includes(id));
            });
            tray.innerHTML = ratings.top3.map(id => {
                const baseImg = document.querySelector(`.pool-card[data-id="${id}"] img`);
                return `<div class="card tray-card" onclick="removeTop3('${id}')"><img src="${baseImg.src}"></div>`;
            }).join('');
            tray.style.display = ratings.top3.length > 0 ? 'flex' : 'none';
            discardedPool.innerHTML = ratings.discarded.map(id => {
                const baseImg = document.querySelector(`.pool-card[data-id="${id}"] img`);
                return `<div class="card" style="width:120px" onclick="recoverImage('${id}')"><img src="${baseImg.src}"></div>`;
            }).join('');
            updateSubmit();
        }
        function removeTop3(id) {
            ratings.top3 = ratings.top3.filter(i => i !== id);
            syncPool();
        }
        function toggleDrawer() {
            document.getElementById('discarded-pool').classList.toggle('open');
        }
        function closeZoom() {
            document.body.classList.remove('modal-open');
            document.getElementById('lightbox').classList.remove('active');
        }
        function updateSubmit() {
            const hasSel = Object.keys(ratings.winners).length > 0 || ratings.top3.length > 0;
            document.getElementById('submit-btn').style.display = hasSel ? 'block' : 'none';
        }
        window.onload = syncPool;
    </script>
</body>
</html>