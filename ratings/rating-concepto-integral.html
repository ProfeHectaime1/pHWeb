
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Miniaturas Concepto Integral</title>
    <style>
        :root { --accent: #2ecc71; --gold: #f1c40f; }
        body { font-family: 'Inter', sans-serif; background: #0a0a0a; color: white; padding: 40px; text-align: center; }
        .container { max-width: 1100px; margin: 0 auto; }
        
        .version-grid { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; margin-top: 20px; min-height: 150px; }
        
        /* Thumbnail Cards */
        .card { position: relative; cursor: pointer; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); border-radius: 12px; width: 220px; border: 3px solid transparent; }
        .card img { width: 100%; border-radius: 9px; display: block; }
        
        /* Group selection logic */
        .group-active .card:not(.selected) { opacity: 0.4; filter: grayscale(100%); transform: scale(0.9); }
        .card.selected { border-color: var(--accent); transform: scale(1.05); opacity: 1 !important; filter: grayscale(0%) !important; box-shadow: 0 10px 20px rgba(46, 204, 113, 0.3); }

        /* Global Section Specifics */
        .global-section { background: #111; padding: 40px; border-radius: 25px; margin-top: 80px; border: 1px solid #222; }
        .full-selection-active .global-card:not(.selected) { opacity: 0.3; filter: blur(2px); }
        .global-card.selected { border-color: var(--gold); box-shadow: 0 10px 20px rgba(241, 196, 15, 0.3); }

        /* The Tray (Selected Global Items) */
        .selection-tray { margin-top: 40px; padding: 20px; background: #1a1a1a; border-radius: 15px; border: 2px solid #333; min-height: 100px; display: flex; justify-content: center; gap: 15px; }
        .tray-item { width: 150px; position: relative; animation: popIn 0.3s ease-out; }
        .tray-item img { width: 100%; border-radius: 8px; border: 2px solid var(--gold); }

        .btn { padding: 12px 25px; border-radius: 8px; border: none; cursor: pointer; font-weight: bold; transition: 0.2s; }
        .btn-rand { background: #333; color: white; margin-bottom: 20px; }
        .submit-btn { background: var(--accent); color: white; padding: 20px 80px; font-size: 1.4rem; margin-top: 40px; border-radius: 50px; }
        
        @keyframes popIn { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    </style>
</head>
<body>
    <div class="container">
        <h1>Miniaturas Concepto Integral</h1>
        <p>Selecciona una por concepto y finalmente tu Top 3 global.</p>

        <div id="concepts">
    <div class="concept-block" id="block-2">
        <h2 style="margin-top:50px">Variaci贸n 2</h2>
        <div class="version-grid" id="grid-2">
            <div class="card" data-id="1SLwxViSkpCsKtgMiQ9lcBfctkYlrPq7D" onclick="toggleConcept('2', '1SLwxViSkpCsKtgMiQ9lcBfctkYlrPq7D', this)">
                <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBOGFKvBwJhwlXOIqUubNgvi_uw-A7zGmeRnZUhgCM1v-RSN2oEDO7JslggE0ludAD-N9-GP1eVO3pjanLaXK_yBf1R0szPLoJh-YZuNhr4kGA=s220">
            </div>
            <div class="card" data-id="1HwXJbge7-pE3NqkTEFeqPIQNbD4ETB2h" onclick="toggleConcept('2', '1HwXJbge7-pE3NqkTEFeqPIQNbD4ETB2h', this)">
                <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBODS-x6vUSWN9Vrl7ADgp_dGn2TCctwbzCE5lZGkNMePbtbI1kPgcoayHTEkWjG9HStYBQcQXALt4ngeH5q1nSzJG36wT8OyvqFjy0rzmCx_DU=s220">
            </div>
            <div class="card" data-id="1pmlnxgLdfyBUhvYTBKHS7mw2v4VaF7NA" onclick="toggleConcept('2', '1pmlnxgLdfyBUhvYTBKHS7mw2v4VaF7NA', this)">
                <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBNbipGwEFiLuE7KShfW3c1g5PFbC0gTzA78l4ODg10ZxGwC5oFthJBp7pWL__B53w449cpNmVmmIoqQoz5UcwMoMPp378CjlRwpMfvZxRFUk4s=s220">
            </div>
            <div class="card" data-id="1jP-cL7JKOUykrYSpXI5QWnQxvjJiGjdg" onclick="toggleConcept('2', '1jP-cL7JKOUykrYSpXI5QWnQxvjJiGjdg', this)">
                <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBPdIKIi7XMgtBC0R7I3YaYcW2riaDNOD2EKcLjfTSeslbeRQqEe7xPBB6r8KMUvpi-0yzoFgW11U28yCXa-kGzDOumuxGO63ExnqHR6Q5sq7tw=s220">
            </div>
            <div class="card" data-id="1S4V1etIZiLqOqSb6wxD39iMdA4nTPTdW" onclick="toggleConcept('2', '1S4V1etIZiLqOqSb6wxD39iMdA4nTPTdW', this)">
                <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBPThp4uChxc7LXQz8H8x9lEmF-aaxjtTLMsRLFjbjihuZO34Fl_baHgHzt-LeCySfQyv3O_Au3g0Y3Vf3dtpjSXnR54nH-qcGB8FjqtDEKJ2A=s220">
            </div>
            <div class="card" data-id="1QIKUe6K5ZJ3Ygcom0_WSighrv09P38lf" onclick="toggleConcept('2', '1QIKUe6K5ZJ3Ygcom0_WSighrv09P38lf', this)">
                <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBNPGDfaxPoUdaRb7rPesp0qtdTYNTh9iOqqmoGsXUWwMYL4yxQatEhKrpn7O4PaTUW1gl3kJDDqEzIPv_pOecoRcEsWWhPzXfQx3cM-qul9lA=s220">
            </div>
            <div class="card" data-id="15JXrUhjGVK6dZC_LwcPp8TP7IhnApqN7" onclick="toggleConcept('2', '15JXrUhjGVK6dZC_LwcPp8TP7IhnApqN7', this)">
                <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBNjuyc9uPqEEIPpYjgvKUUHk4FCMoIqG0ZjAKt0Z3b2nkWgQPPlPcUkY9oFGb-_JLj-wG-A9vcJKNjOaq1G4hoBVFEhjlWcLPh4DZN432KidKA=s220">
            </div></div></div>
    <div class="concept-block" id="block-3">
        <h2 style="margin-top:50px">Variaci贸n 3</h2>
        <div class="version-grid" id="grid-3">
            <div class="card" data-id="1g6iDby9Jn3T9yUncSW14s2Y0_WYjEcYU" onclick="toggleConcept('3', '1g6iDby9Jn3T9yUncSW14s2Y0_WYjEcYU', this)">
                <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBMzEJpsTLPGUFYzjQIF4pt2Xq1kXmTzBNMPw9aHwSZsDKdB0SaknnNFa1Y0-aaaTqjcWVI468HmpZ-I2WKYuuoBPeybhkDr_OSefCD1LiBDqH8=s220">
            </div>
            <div class="card" data-id="1RrtWBv7OVssgQQ4IUdSUmwNGPB3aQq8u" onclick="toggleConcept('3', '1RrtWBv7OVssgQQ4IUdSUmwNGPB3aQq8u', this)">
                <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBMf3i4tuwESenPSGxqoKONktP9KhiD3Hk5rzHrMPRiSnPvjMdGeWdA2kUAlaNcDtW6W7fqJRMwymNhBdVrlScUa3LnSwr8__EfLfBFAo_yeNuY=s220">
            </div>
            <div class="card" data-id="1FzSnc0pZ06beJItC8vq7ea6bpaA4kVr0" onclick="toggleConcept('3', '1FzSnc0pZ06beJItC8vq7ea6bpaA4kVr0', this)">
                <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBPNsANmD3AleRwrobLnEl4RuTkWjPrCmI-2mHWihdOnaFVLzrapckD1J-q0moiCmQUSXaz_Oq7sWL3YEb6-gDgP6OcJ_zUontpdyu0QTHrU_vk=s220">
            </div>
            <div class="card" data-id="1CGKzQk2a_dHQa30oRSwQ-lZwj0loRgUP" onclick="toggleConcept('3', '1CGKzQk2a_dHQa30oRSwQ-lZwj0loRgUP', this)">
                <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBMULy8W2XZGEQe7IyJnlJKwkHH6qyMW6L_QmrcKm2ZBx6X6fIk0LYXmJA-5-ectHDulIpJFiHD37vS9h1JurQNq5PDiSFlIIQmiBqVueWV7mk0=s220">
            </div>
            <div class="card" data-id="1Wcbwr9IkmeLnkxOM-Wt45m4t6XdJRfnS" onclick="toggleConcept('3', '1Wcbwr9IkmeLnkxOM-Wt45m4t6XdJRfnS', this)">
                <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBMQcOAo7VQfRBLNgiuVoYvXIsStzXLNeDKJbNhoLmZHFfOhn5tj-8tCNkESHbmSRPWisrGWI3Pb7SE1Ec4GSJmYIucVuSfNpgprJo7tvDc84Q=s220">
            </div></div></div>
    <div class="concept-block" id="block-4">
        <h2 style="margin-top:50px">Variaci贸n 4</h2>
        <div class="version-grid" id="grid-4">
            <div class="card" data-id="1k4vt--M0x4zXKuLTU8BDDqkuyiQLqqRa" onclick="toggleConcept('4', '1k4vt--M0x4zXKuLTU8BDDqkuyiQLqqRa', this)">
                <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBMo9G9hoYiHJ25SXZ4bMsXaK15uLb4MGWZyBtpiTAQfFDTiFpWuBzDemw_fI7T2AqKLEqpnP5jCRt21_jP3heyl9AKE6hwWL4T273gIMbzncl4=s220">
            </div>
            <div class="card" data-id="1qHhb0oWjsRjXvohyx-FYCZydq3Q7ya7n" onclick="toggleConcept('4', '1qHhb0oWjsRjXvohyx-FYCZydq3Q7ya7n', this)">
                <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBOZtkWKV_RkTZjclnw9C6PD6B8k9_BUEpLRlmJqwPCUPfqJL0ZB_nBUaelKVotMY62jBHhHap4b2g09pxtifD8OTHyDw7TnGATDKQGV5rV50zA=s220">
            </div>
            <div class="card" data-id="1po5Ac4B1cwmpZrbfwGIYeWlEcu3xkaR9" onclick="toggleConcept('4', '1po5Ac4B1cwmpZrbfwGIYeWlEcu3xkaR9', this)">
                <img src="https://lh3.googleusercontent.com/drive-storage/AJQWtBM5AAmzRbBWuNmjE_pVkKr-lvn6yGX84vy2uZ2P9hvuzZWsQMqT6iIIhmompUqSxsnTGWPHUvTb1h-PuBrDAB93M8GM2nPP7ThalkUsNERKTA=s220">
            </div></div></div>
        <div class="global-section">
            <h2>Top 3 Global</h2>
            <button class="btn btn-rand" onclick="renderGlobal(true)"> Mezclar de nuevo</button>
            <div class="version-grid" id="global-pool"></div>
            
            <h3 style="margin-top:40px; color:var(--gold);">Tus 3 favoritas:</h3>
            <div class="selection-tray" id="tray">
                </div>
        </div>

        <button class="submit-btn btn" onclick="sendData()">Finalizar Evaluaci贸n</button>
    </div>

    <script>
        const videoData = [{"versionID":0,"url":"https://lh3.googleusercontent.com/drive-storage/AJQWtBMzEJpsTLPGUFYzjQIF4pt2Xq1kXmTzBNMPw9aHwSZsDKdB0SaknnNFa1Y0-aaaTqjcWVI468HmpZ-I2WKYuuoBPeybhkDr_OSefCD1LiBDqH8=s220","imageID":"1g6iDby9Jn3T9yUncSW14s2Y0_WYjEcYU","conceptID":3},{"versionID":2,"url":"https://lh3.googleusercontent.com/drive-storage/AJQWtBMf3i4tuwESenPSGxqoKONktP9KhiD3Hk5rzHrMPRiSnPvjMdGeWdA2kUAlaNcDtW6W7fqJRMwymNhBdVrlScUa3LnSwr8__EfLfBFAo_yeNuY=s220","imageID":"1RrtWBv7OVssgQQ4IUdSUmwNGPB3aQq8u","conceptID":3},{"versionID":1,"url":"https://lh3.googleusercontent.com/drive-storage/AJQWtBPNsANmD3AleRwrobLnEl4RuTkWjPrCmI-2mHWihdOnaFVLzrapckD1J-q0moiCmQUSXaz_Oq7sWL3YEb6-gDgP6OcJ_zUontpdyu0QTHrU_vk=s220","imageID":"1FzSnc0pZ06beJItC8vq7ea6bpaA4kVr0","conceptID":3},{"versionID":2,"url":"https://lh3.googleusercontent.com/drive-storage/AJQWtBMo9G9hoYiHJ25SXZ4bMsXaK15uLb4MGWZyBtpiTAQfFDTiFpWuBzDemw_fI7T2AqKLEqpnP5jCRt21_jP3heyl9AKE6hwWL4T273gIMbzncl4=s220","imageID":"1k4vt--M0x4zXKuLTU8BDDqkuyiQLqqRa","conceptID":4},{"versionID":1,"url":"https://lh3.googleusercontent.com/drive-storage/AJQWtBOZtkWKV_RkTZjclnw9C6PD6B8k9_BUEpLRlmJqwPCUPfqJL0ZB_nBUaelKVotMY62jBHhHap4b2g09pxtifD8OTHyDw7TnGATDKQGV5rV50zA=s220","imageID":"1qHhb0oWjsRjXvohyx-FYCZydq3Q7ya7n","conceptID":4},{"versionID":4,"url":"https://lh3.googleusercontent.com/drive-storage/AJQWtBMULy8W2XZGEQe7IyJnlJKwkHH6qyMW6L_QmrcKm2ZBx6X6fIk0LYXmJA-5-ectHDulIpJFiHD37vS9h1JurQNq5PDiSFlIIQmiBqVueWV7mk0=s220","imageID":"1CGKzQk2a_dHQa30oRSwQ-lZwj0loRgUP","conceptID":3},{"versionID":3,"url":"https://lh3.googleusercontent.com/drive-storage/AJQWtBMQcOAo7VQfRBLNgiuVoYvXIsStzXLNeDKJbNhoLmZHFfOhn5tj-8tCNkESHbmSRPWisrGWI3Pb7SE1Ec4GSJmYIucVuSfNpgprJo7tvDc84Q=s220","imageID":"1Wcbwr9IkmeLnkxOM-Wt45m4t6XdJRfnS","conceptID":3},{"versionID":6,"url":"https://lh3.googleusercontent.com/drive-storage/AJQWtBOGFKvBwJhwlXOIqUubNgvi_uw-A7zGmeRnZUhgCM1v-RSN2oEDO7JslggE0ludAD-N9-GP1eVO3pjanLaXK_yBf1R0szPLoJh-YZuNhr4kGA=s220","imageID":"1SLwxViSkpCsKtgMiQ9lcBfctkYlrPq7D","conceptID":2},{"versionID":5,"url":"https://lh3.googleusercontent.com/drive-storage/AJQWtBODS-x6vUSWN9Vrl7ADgp_dGn2TCctwbzCE5lZGkNMePbtbI1kPgcoayHTEkWjG9HStYBQcQXALt4ngeH5q1nSzJG36wT8OyvqFjy0rzmCx_DU=s220","imageID":"1HwXJbge7-pE3NqkTEFeqPIQNbD4ETB2h","conceptID":2},{"versionID":4,"url":"https://lh3.googleusercontent.com/drive-storage/AJQWtBNbipGwEFiLuE7KShfW3c1g5PFbC0gTzA78l4ODg10ZxGwC5oFthJBp7pWL__B53w449cpNmVmmIoqQoz5UcwMoMPp378CjlRwpMfvZxRFUk4s=s220","imageID":"1pmlnxgLdfyBUhvYTBKHS7mw2v4VaF7NA","conceptID":2},{"versionID":3,"url":"https://lh3.googleusercontent.com/drive-storage/AJQWtBPdIKIi7XMgtBC0R7I3YaYcW2riaDNOD2EKcLjfTSeslbeRQqEe7xPBB6r8KMUvpi-0yzoFgW11U28yCXa-kGzDOumuxGO63ExnqHR6Q5sq7tw=s220","imageID":"1jP-cL7JKOUykrYSpXI5QWnQxvjJiGjdg","conceptID":2},{"versionID":2,"url":"https://lh3.googleusercontent.com/drive-storage/AJQWtBPThp4uChxc7LXQz8H8x9lEmF-aaxjtTLMsRLFjbjihuZO34Fl_baHgHzt-LeCySfQyv3O_Au3g0Y3Vf3dtpjSXnR54nH-qcGB8FjqtDEKJ2A=s220","imageID":"1S4V1etIZiLqOqSb6wxD39iMdA4nTPTdW","conceptID":2},{"versionID":1,"url":"https://lh3.googleusercontent.com/drive-storage/AJQWtBNPGDfaxPoUdaRb7rPesp0qtdTYNTh9iOqqmoGsXUWwMYL4yxQatEhKrpn7O4PaTUW1gl3kJDDqEzIPv_pOecoRcEsWWhPzXfQx3cM-qul9lA=s220","imageID":"1QIKUe6K5ZJ3Ygcom0_WSighrv09P38lf","conceptID":2},{"versionID":0,"url":"https://lh3.googleusercontent.com/drive-storage/AJQWtBNjuyc9uPqEEIPpYjgvKUUHk4FCMoIqG0ZjAKt0Z3b2nkWgQPPlPcUkY9oFGb-_JLj-wG-A9vcJKNjOaq1G4hoBVFEhjlWcLPh4DZN432KidKA=s220","imageID":"15JXrUhjGVK6dZC_LwcPp8TP7IhnApqN7","conceptID":2},{"versionID":0,"url":"https://lh3.googleusercontent.com/drive-storage/AJQWtBM5AAmzRbBWuNmjE_pVkKr-lvn6yGX84vy2uZ2P9hvuzZWsQMqT6iIIhmompUqSxsnTGWPHUvTb1h-PuBrDAB93M8GM2nPP7ThalkUsNERKTA=s220","imageID":"1po5Ac4B1cwmpZrbfwGIYeWlEcu3xkaR9","conceptID":4}];
        const ratings = { videoID: "concepto-integral", winners: {}, top3: [] };

        // Toggle Concept Selection
        function toggleConcept(cId, imgId, el) {
            const grid = document.getElementById('grid-'+cId);
            if (el.classList.contains('selected')) {
                el.classList.remove('selected');
                grid.classList.remove('group-active');
                delete ratings.winners[cId];
            } else {
                grid.querySelectorAll('.card').forEach(c => c.classList.remove('selected'));
                el.classList.add('selected');
                grid.classList.add('group-active');
                ratings.winners[cId] = imgId;
            }
        }

        // Global Logic
        function renderGlobal(shuffle = false) {
            const pool = document.getElementById('global-pool');
            let list = [...videoData];
            if(shuffle) list.sort(() => Math.random() - 0.5);
            
            pool.innerHTML = list.map(v => `
                <div class="card global-card ${ratings.top3.includes(v.imageID) ? 'selected' : ''}" 
                     id="global-${v.imageID}" onclick="toggleGlobal('${v.imageID}')">
                    <img src="${v.url}">
                </div>`).join('');
            updateGlobalStyles();
        }

        function toggleGlobal(id) {
            const index = ratings.top3.indexOf(id);
            if (index > -1) {
                ratings.top3.splice(index, 1);
            } else {
                if (ratings.top3.length >= 3) return alert("M谩ximo 3 seleccionadas");
                ratings.top3.push(id);
            }
            renderTray();
            renderGlobal();
        }

        function renderTray() {
            const tray = document.getElementById('tray');
            tray.innerHTML = ratings.top3.map(id => {
                const img = videoData.find(v => v.imageID === id);
                return `<div class="tray-item"><img src="${img.url}"></div>`;
            }).join('');
        }

        function updateGlobalStyles() {
            const pool = document.getElementById('global-pool');
            if (ratings.top3.length === 3) pool.classList.add('full-selection-active');
            else pool.classList.remove('full-selection-active');
        }

        function sendData() {
            if (Object.keys(ratings.winners).length < 3) return alert("Falta elegir ganadoras de concepto.");
            if (ratings.top3.length < 3) return alert("Elige 3 favoritas globales.");
            
            fetch('YOUR_N8N_WEBHOOK_URL', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify(ratings)
            }).then(() => { alert("隆Enviado!"); window.location.href = "../rating.html"; });
        }

        renderGlobal(true);
    </script>
</body>
</html>